var orm = require(__dirname + "/../lib/orm");

orm.connect("mysql://orm:orm@localhost/orm", function (success, db) {
	// define a Person
	var Person = db.define("person", {
		"created"	: { "type": "date" },
		"name"		: { "type": "string" },
		"surname"	: { "type": "string", "def": "" },
		"age"		: { "type": "int" },
		"male"		: { "type": "bool", "def": true },
		"meta"		: { "type": "struct" }
	});
	Person.hasOne("parent");

	Person.find({ "age <": 30 }, function (people) {
		console.log(people[1]);
		people[1].getParent(function (parent) {
			console.log(parent);
		});
	});
});
